<!doctype html><html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Supplier Parse</title><style>body{font-family:system-ui;background:#0b0c10;color:#eaf0f1} main{max-width:1100px;margin:0 auto;padding:20px}.card{background:#14151c;border:1px solid #242633;border-radius:14px;padding:14px;margin:12px 0}input,button,select{padding:8px 10px;border-radius:10px;border:1px solid #2a2d3b;background:#0f1016;color:#eaf0f1}.grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}</style></head><body><main><h2>Supplier Parse â€” Preview & Accept</h2><div class='card grid'><div><label>Vendor<br><input id='vendor' placeholder='SYSCO'></label><br><br><label>Filename (.pdf is assumed)<br><input id='filename' placeholder='sysco_123.pdf'></label><br><br><button id='preview'>Preview</button><button id='accept'>Create + Cascade Link</button></div><div><div>Result</div><pre id='out' style='white-space:pre-wrap;min-height:240px'></pre></div></div><div class='card'><h3>Correction</h3><div class='grid'><label>Receipt ID<br><input id='rid' placeholder='rec_...'></label><label>Field<br><select id='field'><option value='total'>total</option><option value='date'>date</option><option value='invoice'>invoice</option><option value='tax'>tax</option></select></label><label>Correct Value<br><input id='cval' placeholder='2264.46 or 2025-01-02'></label></div><button id='save'>Apply Correction (teach)</button><div id='sout'></div></div><script>preview.onclick=async()=>{ const r=await fetch('/suppliers/parse_preview',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({vendor:vendor.value,filename:filename.value})}); out.textContent=JSON.stringify(await r.json(),null,2); }; accept.onclick=async()=>{ const r=await fetch('/suppliers/parse_deep_cascade',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({vendor:vendor.value,filename:filename.value})}); out.textContent=JSON.stringify(await r.json(),null,2); }; save.onclick=async()=>{ const r=await fetch('/suppliers/apply_correction',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({receipt_id:rid.value,field:field.value,value:cval.value})}); sout.textContent=JSON.stringify(await r.json(),null,2); };</script></main></body></html>
